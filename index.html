<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Eran Ben Barak</title>
    <link rel="icon" type="image/png" href="/assets/favicon.png" />
    <style>
      /* Reset styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "CustomFont", sans-serif;
        background-color: white;
        /* Use a CSS variable for the main color */
        color: var(--main-color, red); /* Default to red if not set */
      }

      /* Font faces */
      @font-face {
        font-family: "CustomFont";
        src: url("/assets/fonts/Neoklass-Black.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
      }

      @font-face {
        font-family: "CustomFontMedium";
        src: url("/assets/fonts/Neoklass-Medium.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
      }

      /* Neoklass font faces */
      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Thin.woff2") format("woff2");
        font-weight: 100;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-ThinItalic.woff2") format("woff2");
        font-weight: 100;
        font-style: italic;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Light.woff2") format("woff2");
        font-weight: 300;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-LightItalic.woff2") format("woff2");
        font-weight: 300;
        font-style: italic;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Regular.woff2") format("woff2");
        font-weight: 400;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Italic.woff2") format("woff2");
        font-weight: 400;
        font-style: italic;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Medium.woff2") format("woff2");
        font-weight: 500;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-MediumItalic.woff2") format("woff2");
        font-weight: 500;
        font-style: italic;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Bold.woff2") format("woff2");
        font-weight: 700;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-BoldItalic.woff2") format("woff2");
        font-weight: 700;
        font-style: italic;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-Black.woff2") format("woff2");
        font-weight: 900;
        font-style: normal;
      }

      @font-face {
        font-family: "Neoklass";
        src: url("/assets/fonts/Neoklass-BlackItalic.woff2") format("woff2");
        font-weight: 900;
        font-style: italic;
      }

      /* Sticky Variable font face */
      @font-face {
        font-family: "StickyVariable";
        src: url("/assets/fonts/Sticky-Variable.woff2") format("woff2");
        font-weight: 51 111;
        font-style: oblique -7deg 9deg;
      }

      /* Olivia Display font faces */
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-thin-aaa.woff2") format("woff2");
        font-weight: 100;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-light-aaa.woff2") format("woff2");
        font-weight: 300;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-regular-aaa.woff2") format("woff2");
        font-weight: 400;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-medium-aaa.woff2") format("woff2");
        font-weight: 500;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-demibold-aaa.woff2") format("woff2");
        font-weight: 600;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-bold-aaa.woff2") format("woff2");
        font-weight: 700;
        font-style: normal;
      }
      @font-face {
        font-family: "Olivia Display";
        src: url("/assets/fonts/olivia-display-ultrabold-aaa.woff2") format("woff2");
        font-weight: 800;
        font-style: normal;
      }

      #model-container {
        position: relative;
        width: 100vw;
        height: 100vh;
        overflow: hidden;
      }

      /* Header styles */
      header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 80px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 40px;
        z-index: 1000;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        position: relative;
      }

      .header-title {
        font-size: 18px;
        font-weight: bold;
        text-transform: uppercase;
        text-align: center;
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        font-family: "CustomFont", sans-serif;
      }

      .buttons {
        display: flex;
        gap: 20px;
      }

      .button {
        font-family: "CustomFont", sans-serif;
        font-size: 18px;
        font-weight: bold;
        color: var(--main-color, red);
        background-color: white;
        border: 1px solid var(--main-color, red);
        text-transform: uppercase;
        padding: 4px 18px 2px 18px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .button:hover {
        color: white;
        background-color: var(--main-color, red);
        border-color: var(--main-color, red);
      }

      .button.inverted {
        color: white;
        background-color: var(--main-color, red);
        border-color: var(--main-color, red);
      }

      /* Footer styles */
      .footer-v2 {
        display: flex;
        position: fixed;
        bottom: 40px;
        font-size: 16px;
        letter-spacing: 0.5px;
        justify-content: space-between; /* Adjusted to separate left, center, right */
        align-items: center;
        width: calc(100% - 80px);
        left: 40px;
        right: 40px;
        line-height: 1;
        z-index: 1000;
      }

      /* No need for footer-content div if it's just a wrapper with no specific styling */
      /* .footer-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        max-width: 1200px;
      } */


      .instagram-logo-v2 {
        width: 20px;
        height: 20px;
        cursor: pointer;
        /* Added margin-left to balance with the "Fonts" button */
        margin-left: 60px; /* Adjust this value as needed for visual balance */
      }

      /* Color dots */
      .color-dots {
        display: flex;
        gap: 10px;
        /* Positioned within the flex container of footer-v2 */
      }

      .color-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        border: 1px solid var(--main-color, red);
        cursor: pointer;
        transition: transform 0.2s ease-in-out;
      }

      .color-dot.selected {
        transform: scale(1.4);
      }

      .color-dot.black {
        background-color: black;
      }

      .color-dot.blue {
        background-color: blue;
      }

      .color-dot.red {
        background-color: red;
      }

      /* Modal styles */
      .modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        border: 1px solid var(--main-color, red);
        padding: 30px;
        max-width: 600px;
        width: 90%;
        z-index: 2000;
        box-shadow: none;
      }

      .modal p {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 16px;
        margin-bottom: 20px;
        letter-spacing: 0.5px;
      }

      .modal a {
        color: var(--main-color, red);
        text-decoration: underline;
        transition: color 0.3s ease;
      }

      .modal a:hover {
        color: gray;
      }

      .close-button {
        font-family: "CustomFont", sans-serif;
        font-size: 16px;
        font-weight: bold;
        color: var(--main-color, red);
        background-color: transparent;
        border: 1px solid var(--main-color, red);
        padding: 5px 10px 4px 10px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .close-button:hover {
        color: white;
        background-color: var(--main-color, red);
        border-color: var(--main-color, red);
      }

      /* Type Tester Styles */
      .type-tester {
        margin-top: 0vh;
        padding: 40px;
        background-color: white;
        min-height: 80vh;
      }

      .type-tester-container {
        width: 100%;
        max-width: none;
      }

      .type-tester-title {
        font-family: "CustomFont", sans-serif;
        font-size: 24px;
        text-transform: uppercase;
        margin-bottom: 40px;
        text-align: center;
      }

      .tester-line {
        border-bottom: 1px solid var(--main-color, red);
        padding-bottom: 0px;
        margin-bottom: 10px;
        position: relative;
      }

      .tester-controls {
        display: flex;
        gap: 20px;
        margin-bottom: 30px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .left-controls {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .right-controls {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .control-group {
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .control-label {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 14px;
        letter-spacing: 0.5px;
      }

      /* Custom dropdown styles */
      .custom-select {
        position: relative;
        display: inline-block;
      }

      .select-button {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 14px;
        padding: 4px 20px 4px 8px;
        border: 1px solid var(--main-color, red);
        background-color: white;
        cursor: pointer;
        min-width: 120px;
        text-align: left;
        position: relative;
        transition: all 0.3s ease;
      }

      .select-button:after {
        content: "▼";
        position: absolute;
        right: 8px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 10px;
      }

      .select-button:hover {
        background-color: #f5f5f5;
      }

      .select-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: white;
        border: 1px solid var(--main-color, red);
        border-top: none;
        display: none;
        z-index: 1000;
        max-height: 200px;
        overflow-y: auto;
      }

      .select-option {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 14px;
        padding: 8px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        transition: all 0.3s ease;
      }

      .select-option:last-child {
        border-bottom: none;
      }

      .select-option:hover {
        background-color: #f5f5f5;
      }

      .select-option.selected {
        background-color: var(--main-color, red);
        color: white;
      }

      /* OpenType dropdown */
      .opentype-dropdown {
        position: relative;
      }

      .opentype-dropdown .select-button {
        min-width: 160px;
      }

      .opentype-option {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 6px 8px;
        font-family: "CustomFontMedium", sans-serif;
        font-size: 14px;
        cursor: pointer;
        border-bottom: 1px solid #eee;
        transition: all 0.3s ease;
      }

      .opentype-option:last-child {
        border-bottom: none;
      }

      .opentype-option:hover {
        background-color: #f5f5f5;
      }

      .opentype-checkbox {
        width: 14px;
        height: 14px;
        border: 1px solid var(--main-color, red);
        background-color: white;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
      }

      .opentype-checkbox.checked {
        background-color: var(--main-color, red);
        color: white;
      }

      .opentype-checkbox.checked:before {
        content: "✓";
      }

      .size-slider {
        width: 120px;
        height: 2px;
        background: #ddd;
        outline: none;
        border: none;
        cursor: pointer;
        -webkit-appearance: none;
        appearance: none;
      }

      .size-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: var(--main-color, red);
        cursor: pointer;
        border-radius: 0;
        border: none;
      }

      .size-slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: var(--main-color, red);
        cursor: pointer;
        border-radius: 0;
        border: none;
      }

      .size-slider::-moz-range-track {
        height: 2px;
        background: #ddd;
        border: none;
      }

      .size-display {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 14px;
        min-width: 40px;
        text-align: center;
      }

      .text-input-container {
        position: relative;
      }

      .text-input {
        font-family: "Neoklass", serif;
        font-size: 93px;
        font-weight: 900;
        font-style: italic;
        text-align: center;
        width: 100%;
        border: none;
        outline: none;
        background: transparent;
        padding: 0px 0;
        line-height: 1;
        resize: none;
        overflow: hidden;
        position: relative;
        z-index: 1;
        color: var(--main-color, red); /* Text color controlled by theme */
      }

      .text-input::placeholder {
        color: var(--placeholder-color, #999); /* Placeholder color controlled by theme */
      }
      /* Variable font slider styles */
      .variable-sliders {
        display: flex;
        gap: 20px;
        align-items: center;
      }

      .slider-group {
        display: flex;
        align-items: center; /* Align items in the center horizontally */
        gap: 4px;
      }

      .slider-label {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 12px;
        letter-spacing: 0.5px;
        text-align: left; /* Align text to the left */
        min-width: 35px; /* Give it a minimum width */
      }

      .variable-slider {
        width: 80px;
        height: 2px;
        background: #ddd;
        outline: none;
        border: none;
        cursor: pointer;
        -webkit-appearance: none;
        appearance: none;
      }

      .variable-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 16px;
        height: 16px;
        background: var(--main-color, red);
        cursor: pointer;
        border-radius: 0;
        border: none;
      }

      .variable-slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: var(--main-color, red);
        cursor: pointer;
        border-radius: 0;
        border: none;
      }

      .variable-slider::-moz-range-track {
        height: 2px;
        background: #ddd;
        border: none;
      }

      .slider-value {
        font-family: "CustomFontMedium", sans-serif;
        font-size: 12px;
        min-width: 30px;
        text-align: right; /* Align text to the right */
      }

      /* Sticky text input */
      .sticky-text-input {
        font-family: "StickyVariable", sans-serif;
        font-size: 93px;
        font-weight: 51;
        font-style: oblique -7deg;
        text-align: center;
        width: 100%;
        border: none;
        outline: none;
        background: transparent;
        padding: 0px 0;
        line-height: 1;
        resize: none;
        overflow: hidden;
        position: relative;
        z-index: 1;
        color: var(--main-color, red); /* Text color controlled by theme */
        /* Removed hardcoded font-feature-settings to allow JS control */
      }

      .sticky-text-input::placeholder {
        color: var(--placeholder-color, #999);
      }

      /* Olivia Display text input */
      .olivia-text-input {
        font-family: "Olivia Display", serif;
        font-size: 93px;
        font-weight: 500; /* Default to Medium */
        font-style: normal;
        text-align: center;
        width: 100%;
        border: none;
        outline: none;
        background: transparent;
        padding: 0px 0;
        padding-top: 25px;
        line-height: 1;
        resize: none;
        overflow: hidden;
        position: relative;
        z-index: 1;
        color: var(--main-color, red); /* Text color controlled by theme */
      }

      .olivia-text-input::placeholder {
        color: var(--placeholder-color, #999);
      }

      /* Mobile responsive for variable sliders */
      @media (max-width: 768px) {
        .variable-sliders {
          gap: 15px;
        }

        .variable-slider {
          width: 60px;
        }

        .slider-label {
          font-size: 11px;
        }

        .slider-value {
          font-size: 11px;
        }
      }

      .buy-button {
        font-family: "CustomFont", sans-serif;
        font-size: 14px;
        font-weight: bold;
        color: var(--main-color, red);
        background-color: transparent;
        border: 1px solid var(--main-color, red);
        text-transform: uppercase;
        padding: 4px 12px 2px 12px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-block;
      }

      .buy-button:hover {
        color: white;
        background-color: var(--main-color, red);
        border-color: var(--main-color, red);
      }

      /* Responsive styles */
      @media (max-width: 768px) {
        .header-title {
          font-size: 14px;
        }

        .button {
          font-size: 14px;
          padding: 3px 10px 2px 10px;
        }

        .footer-v2 {
          font-size: 12px;
          letter-spacing: 0px;
          bottom: 20px;
          width: calc(100% - 20px);
          left: 10px;
          right: 10px;
        }

        .instagram-logo-v2 {
          width: 22px;
          height: 22px;
          /* Adjust margin for mobile if needed */
          margin-left: 40px; /* Example adjustment */
        }

        header {
          padding: 0px 10px;
          justify-content: space-between;
        }

        .header-content {
          margin: 1px 1px;
        }

        .modal p {
          font-family: "CustomFontMedium", sans-serif;
          font-size: 14px;
          margin-bottom: 20px;
          letter-spacing: 0.5px;
        }

        .type-tester {
          padding: 40px 20px 120px 20px;
        }

        .type-tester-title {
          font-size: 18px;
        }

        .tester-controls {
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
        }

        .left-controls,
        .right-controls {
          width: 100%;
          justify-content: space-between;
        }

        .size-slider {
          width: 100px;
        }

        .text-input,
        .sticky-text-input,
        .olivia-text-input {
          font-size: 32px;
        }

        .select-button {
          min-width: 100px;
        }

        .opentype-dropdown .select-button {
          min-width: 140px;
        }
      }
    </style>
    <script>
      function openContactEmail() {
        window.location.href = "mailto:info@eranbenbarak.com";
      }

      function toggleModal() {
        const modal = document.getElementById("about-modal");
        const aboutButton = document.querySelector(
          '.button[onclick="toggleModal()"]'
        );

        if (modal.style.display === "none" || modal.style.display === "") {
          modal.style.display = "block";
          aboutButton.classList.add("inverted");
        } else {
          modal.style.display = "none";
          aboutButton.classList.remove("inverted");
        }
      }

      function scrollToTypeTester() {
        const typeTester = document.querySelector('.type-tester');
        typeTester.scrollIntoView({ behavior: 'smooth' });
      }

      // Custom dropdown functionality
      function initializeDropdowns() {
        document.querySelectorAll('.custom-select').forEach(select => {
          const button = select.querySelector('.select-button');
          const dropdown = select.querySelector('.select-dropdown');
          
          button.addEventListener('click', (e) => {
            e.stopPropagation();
            // Close other dropdowns
            document.querySelectorAll('.select-dropdown').forEach(dd => {
              if (dd !== dropdown) dd.style.display = 'none';
            });
            dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
          });
        });

        // Close dropdowns when clicking outside
        document.addEventListener('click', () => {
          document.querySelectorAll('.select-dropdown').forEach(dd => {
            dd.style.display = 'none';
          });
        });
      }

      function selectStyle(option, weight, style, name) {
        const select = option.closest('.custom-select');
        const button = select.querySelector('.select-button');
        const dropdown = select.querySelector('.select-dropdown');
        // Select either .text-input (Neoklass) or .olivia-text-input (Olivia)
        const textInput = select.closest('.tester-line').querySelector('.text-input, .olivia-text-input');
        
        // Update selected state
        select.querySelectorAll('.select-option').forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        
        // Update button text
        button.textContent = name;
        
        // Update font
        textInput.style.fontWeight = weight;
        textInput.style.fontStyle = style;
        
        // Close dropdown
        dropdown.style.display = 'none';
      }

      function toggleOpenTypeFeature(checkbox, feature) {
        // Select either .text-input (Neoklass) or .olivia-text-input (Olivia)
        const textInput = checkbox.closest('.tester-line').querySelector('.text-input, .olivia-text-input');
        
        checkbox.classList.toggle('checked');
        
        // Get all active features for this line
        const activeFeatures = Array.from(checkbox.closest('.tester-line').querySelectorAll('.opentype-checkbox.checked'))
          .map(cb => cb.dataset.feature);
        
        // Apply font-feature-settings
        if (activeFeatures.length > 0) {
          const featureString = activeFeatures.map(f => `"${f}" 1`).join(', ');
          textInput.style.fontFeatureSettings = featureString;
        } else {
          textInput.style.fontFeatureSettings = 'normal';
        }
      }

      function updateSize(slider) {
        // Select either .text-input (Neoklass) or .olivia-text-input (Olivia) or .sticky-text-input (Sticky)
        const textInput = slider.closest('.tester-line').querySelector('.text-input, .olivia-text-input, .sticky-text-input');
        const sizeDisplay = slider.closest('.tester-line').querySelector('.size-display');
        const sizePx = parseInt(slider.value);
        const sizePt = Math.round(sizePx * 0.75); // Convert px to pt (1pt = 1.33px approximately)
        
        textInput.style.fontSize = sizePx + 'px';
        sizeDisplay.textContent = sizePt + 'pt';
      }

      function autoResize(textarea) {
        textarea.style.height = 'auto';
        const newHeight = Math.max(textarea.scrollHeight, 60);
        textarea.style.height = newHeight + 'px';
      }

      function selectStickyStyle(option, weight, slant, name) {
        const select = option.closest('.custom-select');
        const button = select.querySelector('.select-button');
        const dropdown = select.querySelector('.select-dropdown');
        const textInput = select.closest('.tester-line').querySelector('.sticky-text-input');
        const weightSlider = select.closest('.tester-line').querySelector('.weight-slider');
        const slantSlider = select.closest('.tester-line').querySelector('.slant-slider');
        
        // Update selected state
        select.querySelectorAll('.select-option').forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        
        // Update button text
        button.textContent = name;
        
        // Update sliders and font
        weightSlider.value = weight;
        slantSlider.value = slant;
        updateStickyFont(textInput, weight, slant);
        
        // Update slider displays
        updateSliderDisplay(weightSlider);
        updateSliderDisplay(slantSlider);
        
        // Close dropdown
        dropdown.style.display = 'none';
      }

      function updateStickyFont(textInput, weight, slant) {
        textInput.style.fontWeight = weight;
        // Use 'ital' for slant axis as per font file
        textInput.style.fontVariationSettings = `"wght" ${weight}, "ital" ${slant}`;
      }

      function updateSliderDisplay(slider) {
        const display = slider.parentElement.querySelector('.slider-value');
        if (slider.classList.contains('weight-slider')) {
          display.textContent = slider.value;
        } else if (slider.classList.contains('slant-slider')) {
          display.textContent = slider.value + '°';
        }
      }

      function updateVariableAxis(slider) {
        const textInput = slider.closest('.tester-line').querySelector('.sticky-text-input');
        const weightSlider = slider.closest('.tester-line').querySelector('.weight-slider');
        const slantSlider = slider.closest('.tester-line').querySelector('.slant-slider');
        
        const weight = weightSlider.value;
        const slant = slantSlider.value;
        
        updateStickyFont(textInput, weight, slant);
        updateSliderDisplay(slider);
      }

      function toggleStickyOpenTypeFeature(checkbox, feature) {
        const textInput = checkbox.closest('.tester-line').querySelector('.sticky-text-input');
        
        checkbox.classList.toggle('checked');
        
        // Get all active features for this line
        const activeFeatures = Array.from(checkbox.closest('.tester-line').querySelectorAll('.opentype-checkbox.checked'))
          .map(cb => `"${cb.dataset.feature}" 1`);
        
        // Apply font-feature-settings
        if (activeFeatures.length > 0) {
          textInput.style.fontFeatureSettings = activeFeatures.join(', ');
        } else {
          textInput.style.fontFeatureSettings = 'normal';
        }
      }

      // --- New Color Theme Logic ---

      const themes = [
        { name: 'red', mainColor: 'red', placeholderColor: '#FF6666', instagramLogo: '/assets/instagram-logo-red.svg' },
        { name: 'blue', mainColor: 'blue', placeholderColor: '#6699FF', instagramLogo: '/assets/instagram-logo-blue.svg' },
        { name: 'black', mainColor: 'black', placeholderColor: '#666666', instagramLogo: '/assets/instagram-logo.svg' }
      ];

      function applyTheme(theme) {
        document.documentElement.style.setProperty('--main-color', theme.mainColor);
        document.documentElement.style.setProperty('--placeholder-color', theme.placeholderColor);

        // Update dot selection
        document.querySelectorAll('.color-dot').forEach(dot => {
            dot.classList.remove('selected');
        });
        document.querySelector(`.color-dot.${theme.name}`).classList.add('selected');

        // Update Instagram logo
        document.querySelector('.instagram-logo-v2').src = theme.instagramLogo;

        // Update placeholder colors for all text areas
        document.querySelectorAll('.text-input, .sticky-text-input, .olivia-text-input').forEach(input => {
            input.style.setProperty('--placeholder-color', theme.placeholderColor);
        });
      }

      // Initialize everything when page loads
      document.addEventListener('DOMContentLoaded', function() {
        initializeDropdowns();

        // Initialize sticky sliders and text input when page loads
        document.querySelectorAll('.sticky-text-input').forEach(input => {
          const weightSlider = input.closest('.tester-line').querySelector('.weight-slider');
          const slantSlider = input.closest('.tester-line').querySelector('.slant-slider');
          if (weightSlider && slantSlider) {
              updateStickyFont(input, weightSlider.value, slantSlider.value);
              updateSliderDisplay(weightSlider);
              updateSliderDisplay(slantSlider);
          }
          autoResize(input); // Also resize on load

          // Manually apply initial font-feature-settings for Sticky, based on pre-ticked checkboxes
          const initialStickyFeatures = Array.from(input.closest('.tester-line').querySelectorAll('.opentype-checkbox.checked'))
            .map(cb => `"${cb.dataset.feature}" 1`);
          if (initialStickyFeatures.length > 0) {
            input.style.fontFeatureSettings = initialStickyFeatures.join(', ');
          } else {
            input.style.fontFeatureSettings = 'normal';
          }
        });

        // Initialize Olivia Display features
        document.querySelectorAll('.olivia-text-input').forEach(input => {
            autoResize(input);
            const initialOliviaFeatures = Array.from(input.closest('.tester-line').querySelectorAll('.opentype-checkbox.checked'))
                .map(cb => `"${cb.dataset.feature}" 1`);
            if (initialOliviaFeatures.length > 0) {
                input.style.fontFeatureSettings = initialOliviaFeatures.join(', ');
            } else {
                input.style.fontFeatureSettings = 'normal';
            }
        });

        // Apply a random theme on page load
        const randomTheme = themes[Math.floor(Math.random() * themes.length)];
        applyTheme(randomTheme);
      });
    </script>
  </head>
  <body>
    <header>
      <div class="buttons">
        <button class="button" onclick="toggleModal()">About</button>
      </div>
      <div class="header-content">
        <div class="header-title">Eran Ben Barak</div>
      </div>
      <div class="buttons">
        <button class="button" onclick="openContactEmail()">Contact</button>
      </div>
    </header>

    <div id="model-container"></div>

    <div class="type-tester">
      <div class="type-tester-container">
        <h2 class="type-tester-title">Published Typefaces</h2>
        
        <div class="tester-line">
          <div class="tester-controls">
            <div class="left-controls">
              <div class="custom-select">
                <div class="select-button">Black Italic</div>
                <div class="select-dropdown">
                  <div class="select-option" onclick="selectStyle(this, '100', 'normal', 'Thin')">Thin</div>
                  <div class="select-option" onclick="selectStyle(this, '100', 'italic', 'Thin Italic')">Thin Italic</div>
                  <div class="select-option" onclick="selectStyle(this, '300', 'normal', 'Light')">Light</div>
                  <div class="select-option" onclick="selectStyle(this, '300', 'italic', 'Light Italic')">Light Italic</div>
                  <div class="select-option" onclick="selectStyle(this, '400', 'normal', 'Regular')">Regular</div>
                  <div class="select-option" onclick="selectStyle(this, '400', 'italic', 'Italic')">Italic</div>
                  <div class="select-option" onclick="selectStyle(this, '500', 'normal', 'Medium')">Medium</div>
                  <div class="select-option" onclick="selectStyle(this, '500', 'italic', 'Medium Italic')">Medium Italic</div>
                  <div class="select-option" onclick="selectStyle(this, '700', 'normal', 'Bold')">Bold</div>
                  <div class="select-option" onclick="selectStyle(this, '700', 'italic', 'Bold Italic')">Bold Italic</div>
                  <div class="select-option" onclick="selectStyle(this, '900', 'normal', 'Black')">Black</div>
                  <div class="select-option selected" onclick="selectStyle(this, '900', 'italic', 'Black Italic')">Black Italic</div>
                </div>
              </div>
              
              <div class="control-group">
                <span class="control-label">Size</span>
                <input type="range" class="size-slider" min="9" max="150" value="93" oninput="updateSize(this)">
                <span class="size-display">70pt</span>
              </div>
            </div>
            
            <div class="right-controls">
              <div class="custom-select opentype-dropdown">
                <div class="select-button">Features</div>
                <div class="select-dropdown">
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="ss01" onclick="toggleOpenTypeFeature(this, 'ss01')"></div>
                    <span>Alt Gimel</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="ss02" onclick="toggleOpenTypeFeature(this, 'ss02')"></div>
                    <span>Alt Mem</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="c2sc" onclick="toggleOpenTypeFeature(this, 'c2sc')"></div>
                    <span>C2SC</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="smcp" onclick="toggleOpenTypeFeature(this, 'smcp')"></div>
                    <span>Small Caps</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="numr" onclick="toggleOpenTypeFeature(this, 'numr')"></div>
                    <span>Numerators</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="dnom" onclick="toggleOpenTypeFeature(this, 'dnom')"></div>
                    <span>Denominators</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="tnum" onclick="toggleOpenTypeFeature(this, 'tnum')"></div>
                    <span>Tabular</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="frac" onclick="toggleOpenTypeFeature(this, 'frac')"></div>
                    <span>Fractions</span>
                  </div>
                </div>
              </div>
              
              <a href="https://fontef.com/neoklass" target="_blank" class="buy-button">Buy</a>
            </div>
          </div>
          
          <div class="text-input-container">
            <textarea class="text-input" placeholder="Neoklass נאוקלאס" oninput="autoResize(this)"></textarea>
          </div>
        </div>

        <div class="tester-line">
          <div class="tester-controls">
            <div class="left-controls">
              <div class="custom-select">
                <div class="select-button">Backslant</div>
                <div class="select-dropdown">
                  <div class="select-option selected" onclick="selectStickyStyle(this, '51', '-7', 'Backslant')">Backslant</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '51', '0', 'Regular')">Regular</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '51', '9', 'Italic')">Italic</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '81', '-7', 'Medium Backslant')">Medium Backslant</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '81', '0', 'Medium')">Medium</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '81', '9', 'Medium Italic')">Medium Italic</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '111', '-7', 'Bold Backslant')">Bold Backslant</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '111', '0', 'Bold')">Bold</div>
                  <div class="select-option" onclick="selectStickyStyle(this, '111', '9', 'Bold Italic')">Bold Italic</div>
                </div>
              </div>
              
              <div class="variable-sliders">
                <div class="slider-group">
                  <span class="slider-label">Size</span>
                  <input type="range" class="size-slider" min="9" max="150" value="93" oninput="updateSize(this)">
                  <span class="size-display">70pt</span>
                </div>
                
                <div class="slider-group">
                  <span class="slider-label">Weight</span>
                  <input type="range" class="variable-slider weight-slider" min="51" max="111" value="51" oninput="updateVariableAxis(this)">
                  <span class="slider-value">51</span>
                </div>
                
                <div class="slider-group">
                  <span class="slider-label">Slant</span>
                  <input type="range" class="variable-slider slant-slider" min="-7" max="9" value="-7" oninput="updateVariableAxis(this)">
                  <span class="slider-value">-7°</span>
                </div>
              </div>
            </div>
            
            <div class="right-controls">
              <div class="custom-select opentype-dropdown">
                <div class="select-button">Features</div>
                <div class="select-dropdown">
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="onum" onclick="toggleStickyOpenTypeFeature(this, 'onum')"></div>
                    <span>Oldstyle Figures</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox checked" data-feature="calt" onclick="toggleStickyOpenTypeFeature(this, 'calt')"></div>
                    <span>Contextual Alternates</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox checked" data-feature="liga" onclick="toggleStickyOpenTypeFeature(this, 'liga')"></div>
                    <span>Ligatures</span>
                  </div>
                </div>
              </div>
              
              <a href="https://ecal-typefaces.ch/typeface/sticky/" target="_blank" class="buy-button">Buy</a>
            </div>
          </div>
          
          <div class="text-input-container">
            <textarea class="sticky-text-input" placeholder="Sticky Variable" oninput="autoResize(this)"></textarea>
          </div>
        </div>

        <div class="tester-line">
          <div class="tester-controls">
            <div class="left-controls">
              <div class="custom-select">
                <div class="select-button">Medium</div>
                <div class="select-dropdown">
                  <div class="select-option" onclick="selectStyle(this, '100', 'normal', 'Thin')">Thin</div>
                  <div class="select-option" onclick="selectStyle(this, '300', 'normal', 'Light')">Light</div>
                  <div class="select-option" onclick="selectStyle(this, '400', 'normal', 'Regular')">Regular</div>
                  <div class="select-option selected" onclick="selectStyle(this, '500', 'normal', 'Medium')">Medium</div>
                  <div class="select-option" onclick="selectStyle(this, '600', 'normal', 'Demibold')">Demibold</div>
                  <div class="select-option" onclick="selectStyle(this, '700', 'normal', 'Bold')">Bold</div>
                  <div class="select-option" onclick="selectStyle(this, '800', 'normal', 'Ultrabold')">Ultrabold</div>
                </div>
              </div>

              <div class="control-group">
                <span class="control-label">Size</span>
                <input type="range" class="size-slider" min="9" max="150" value="93" oninput="updateSize(this)">
                <span class="size-display">70pt</span>
              </div>
            </div>

            <div class="right-controls">
              <div class="custom-select opentype-dropdown">
                <div class="select-button">Features</div>
                <div class="select-dropdown">
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="dlig" onclick="toggleOpenTypeFeature(this, 'dlig')"></div>
                    <span>Discretionary Ligatures</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox checked" data-feature="liga" onclick="toggleOpenTypeFeature(this, 'liga')"></div>
                    <span>Ligatures</span>
                  </div>
                  <div class="opentype-option">
                    <div class="opentype-checkbox" data-feature="ss01" onclick="toggleOpenTypeFeature(this, 'ss01')"></div>
                    <span>Alt Sheqel</span>
                  </div>
                </div>
              </div>

              <a href="https://alefalefalef.co.il/font/olivia-display/" target="_blank" class="buy-button">Buy</a>
            </div>
          </div>

          <div class="text-input-container">
            <textarea class="olivia-text-input" placeholder="Olivia Display אוליביה דיספליי" oninput="autoResize(this)"></textarea>
          </div>
        </div>

      </div>
    </div>

    <div class="footer-v2">
      <button class="button" onclick="scrollToTypeTester()">Fonts</button>
      <div class="color-dots">
          <div class="color-dot black" onclick="applyTheme(themes[2])"></div>
          <div class="color-dot blue" onclick="applyTheme(themes[1])"></div>
          <div class="color-dot red" onclick="applyTheme(themes[0])"></div>
      </div>
      <img
        src="/assets/instagram-logo.svg"
        alt="Instagram"
        class="instagram-logo-v2"
        onclick="window.open('https://www.instagram.com/eranbenbarak/', '_blank')"
      />
    </div>

    <div id="about-modal" class="modal">
      <p>
        Hi! I'm Eran Ben Barak, a freelance type designer originally from
        Israel, now living in Italy. After spending a couple of years working in
        Israel, I moved to Switzerland to complete my master's in type design at
        ECAL. These days, I work as a freelancer, designing custom typefaces for
        cultural projects, localizing typefaces to Hebrew, and collaborating
        with foundries to publish my type designs.
      </p>
      <button class="close-button" onclick="toggleModal()">Close</button>
    </div>

    <script type="importmap">
      {
        "imports": {
          "three": "https://cdn.jsdelivr.net/npm/three@0.172.0/build/three.module.js",
          "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.172.0/examples/jsm/"
        }
      }
    </script>
    <script type="module">
      import * as THREE from "three";
      import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";

      class ModelViewer {
        constructor(container) {
          this.container = container;
          this.scene = new THREE.Scene();
          this.scene.background = new THREE.Color(0xFFFFFF);

          this.camera = new THREE.PerspectiveCamera(
            75,
            window.innerWidth / window.innerHeight,
            0.1,
            1000
          );
          this.camera.position.set(0, 0, 3);

          this.renderer = new THREE.WebGLRenderer({ antialias: true });
          this.renderer.setSize(window.innerWidth, window.innerHeight);
          this.renderer.setPixelRatio(window.devicePixelRatio);
          this.container.appendChild(this.renderer.domElement);

          const ambientLight = new THREE.AmbientLight(0xF0F0F0, 0.5);
          this.scene.add(ambientLight);

          const directionalLight = new THREE.DirectionalLight(0xF0F0F0, 5);
          directionalLight.position.set(0, 4, 4);
          this.scene.add(directionalLight);

          this.mouse = new THREE.Vector2();
          this.targetRotation = new THREE.Vector2();
          this.currentRotation = new THREE.Vector2();
          this.isMobile = /Mobi|Android/i.test(navigator.userAgent);

          if (this.isMobile) {
            window.addEventListener("touchmove", (event) => {
              const touch = event.touches[0];
              if (touch) {
                this.mouse.x = (touch.clientX / window.innerWidth) * 2 - 1;
                this.mouse.y = -(touch.clientY / window.innerHeight) * 2 + 1;

                const intensity = 0.5;
                this.targetRotation.y = this.mouse.x * Math.PI * intensity;
                this.targetRotation.x = -this.mouse.y * Math.PI * intensity;
              }
            });
          } else {
            window.addEventListener("mousemove", this.onMouseMove.bind(this));
          }
          window.addEventListener("resize", this.onWindowResize.bind(this));
          
          this.loadModel("/assets/models/1.glb", (model) => {
            this.showModel(model);
            }, (err) => console.error("Failed to load model:", err));

          this.mixer = null;
          this.clock = new THREE.Clock();
          this.model = null;
          this.modelGroup = new THREE.Group();
          this.scene.add(this.modelGroup);

          this.animate();
        }

        easeOutCubic(t) {
          return 1 - Math.pow(1 - t, 3);
        }

        loadModel(url, onLoad, onError) {
          const loader = new GLTFLoader();
          loader.load(
            url,
            (gltf) => {
              const model = gltf.scene;
              const box = new THREE.Box3().setFromObject(model);
              const center = box.getCenter(new THREE.Vector3());
              model.position.set(-center.x, -center.y, -center.z);

              const size = box.getSize(new THREE.Vector3());
              const scale =
                (this.isMobile ? 2 : 4) / Math.max(size.x, size.y, size.z);
              model.scale.setScalar(scale);

              model.rotation.order = "XYZ";
              model.rotation.x = -Math.PI / 2;
              model.rotation.y = Math.PI;
              model.rotation.z = Math.PI;

              gltf.scene.traverse((child) => {
                if (child.isMesh) {
                  child.castShadow = true;
                  child.receiveShadow = true;
                }
              });

              if (gltf.animations.length) {
                this.mixer = new THREE.AnimationMixer(gltf.scene);
                gltf.animations.forEach((clip) =>
                  this.mixer.clipAction(clip).play()
                );
              }

              onLoad(model);
            },
            undefined,
            (error) => onError(error)
          );
        }

        showModel(model) {
          const oldModel = this.model;
          this.model = model;
          this.modelGroup.add(model);

          if (oldModel) {
            const slideOut = new THREE.Vector3(-15, 0, 0);
            const slideIn = new THREE.Vector3(15, 0, 0);
            model.position.copy(slideIn);

            const slideDuration = 5;
            const clock = new THREE.Clock();

            const animateTransition = () => {
              const elapsedTime = clock.getElapsedTime();
              const progress = elapsedTime / slideDuration;
              const easedProgress = this.easeOutCubic(Math.min(progress, 1));

              if (progress < 1) {
                oldModel.position.lerp(slideOut, easedProgress);
                model.position.lerp(new THREE.Vector3(0, 0, 0), easedProgress);
                requestAnimationFrame(animateTransition);
              } else {
                this.modelGroup.remove(oldModel);
              }

              this.renderer.render(this.scene, this.camera);
            };

            animateTransition();
          }
        }

        updateModelRotation() {
          if (!this.modelGroup) return;

          this.currentRotation.y +=
            (this.targetRotation.y - this.currentRotation.y) * 0.1;
          this.currentRotation.x +=
            (this.targetRotation.x - this.currentRotation.x) * 0.1;

          if (this.model) {
            this.model.rotation.x = -Math.PI / 2 + this.currentRotation.x;
            this.model.rotation.y = Math.PI + this.currentRotation.y;
          }
        }

        onMouseMove(event) {
          this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
          this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

          const intensity = 0.1;
          this.targetRotation.y = this.mouse.x * Math.PI * intensity;
          this.targetRotation.x = -this.mouse.y * Math.PI * intensity;
        }

        onWindowResize() {
          this.camera.aspect = window.innerWidth / window.innerHeight;
          this.camera.updateProjectionMatrix();
          this.renderer.setSize(window.innerWidth, window.innerHeight);
        }

        animate() {
          requestAnimationFrame(() => this.animate());

          if (this.mixer) {
            const delta = this.clock.getDelta();
            this.mixer.update(delta);
          }

          this.updateModelRotation();
          this.renderer.render(this.scene, this.camera);
        }
      }

      const container = document.getElementById("model-container");
      new ModelViewer(container);
    </script>
  </body>
</html>